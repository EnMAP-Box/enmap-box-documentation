
..
  ## AUTOGENERATED TITLE START

.. _alg-enmapbox-RegressionbasedUnmixing:

*************************
Regression-based unmixing
*************************

..
  ## AUTOGENERATED TITLE END


..
  ## AUTOGENERATED DESCRIPTION START

Implementation of the `regression <https://enmap-box.readthedocs.io/en/latest/general/glossary.html#term-regression>`_-based unmixing approach `"Ensemble Learning From Synthetically Mixed Training Data for Quantifying Urban Land Cover With Support Vector Regression" <https://doi.org/10.1109/JSTARS.2016.2634859>`_ in IEEE Journal of Selected Topics in Applied Earth Observations and Remote Sensing, vol. 10, no. 4, pp. 1640-1650, April 2017.


..
  ## AUTOGENERATED DESCRIPTION END


Usage:

1. Start the algorithm from the Processing Toolbox panel.

2. Select a training dataset ore create one by clicking the processing algorithm icon. Select a raster layer to process and a regressor. Adjust the parameterization if needed. Then click :guilabel:`run`.

    .. figure:: ../../processing_algorithms_includes/unmixing/img/regression_unmixing.png
       :align: center

..
  ## AUTOGENERATED PARAMETERS START

**Parameters**


:guilabel:`Endmember dataset` [file]
    A `classification <https://enmap-box.readthedocs.io/en/latest/general/glossary.html#term-classification>`_ `dataset <https://enmap-box.readthedocs.io/en/latest/general/glossary.html#term-dataset>`_ with spectral endmembers used for synthetical mixing.

:guilabel:`Raster layer` [raster]
    A `raster layer <https://enmap-box.readthedocs.io/en/latest/general/glossary.html#term-raster-layer>`_ to be unmixed.

:guilabel:`Regressor` [string]
    Scikit-Learn Python code specifying a `regressor <https://enmap-box.readthedocs.io/en/latest/general/glossary.html#term-regressor>`_.

:guilabel:`Number of mixtures per class` [number]
    Number of mixtures per `class <https://enmap-box.readthedocs.io/en/latest/general/glossary.html#term-class>`_.
    Default: *1000*


:guilabel:`Proportion of background mixtures (%)` [number]
    Proportion of background mixtures.
    Default: *0*


:guilabel:`Include original endmembers` [boolean]
    Whether to include the original library spectra into the `dataset <https://enmap-box.readthedocs.io/en/latest/general/glossary.html#term-dataset>`_.
    Default: *True*


:guilabel:`Mixing complexity probabilities` [string]
    A list of probabilities for using 2, 3, 4, ... endmember mixing models. Trailing 0 probabilities can be skipped. The default values of 0.5, 0.5,result in 50% 2-endmember and 50% 3-endmember models.
    Default: *0.5, 0.5*


:guilabel:`Allow within-class mixtures` [boolean]
    Whether to allow mixtures with profiles belonging to the same `class <https://enmap-box.readthedocs.io/en/latest/general/glossary.html#term-class>`_.
    Default: *True*


:guilabel:`Class probabilities` [string]
    A list of probabilities for drawing profiles from each `class <https://enmap-box.readthedocs.io/en/latest/general/glossary.html#term-class>`_. If not specified, class probabilities are proportional to the class size.

:guilabel:`Ensemble size` [number]
    Number of individual runs/predictions.
    Default: *1*


:guilabel:`Robust decision fusion` [boolean]
    Whether to use median and IQR \(interquartile range\) aggregation for ensemble decision fusion. The default is to use mean and standard deviation.
    Default: *False*


:guilabel:`Sum-to-one constraint` [boolean]
    Whether to ensure sum-to-one constraint for predicted fractions.
    Default: *False*



**Outputs**


:guilabel:`Output class fraction layer` [rasterDestination]
    Raster file destination.

:guilabel:`Output classification layer` [rasterDestination]
    Raster file destination.

:guilabel:`Output class fraction variation layer` [rasterDestination]
    Raster file destination.

..
  ## AUTOGENERATED PARAMETERS END

..
  ## AUTOGENERATED COMMAND USAGE START

**Command-line usage**

``>qgis_process help enmapbox:RegressionbasedUnmixing``::

    ----------------
    Arguments
    ----------------
    
    dataset: Endmember dataset
    	Argument type:	file
    	Acceptable values:
    		- Path to a file
    raster: Raster layer
    	Argument type:	raster
    	Acceptable values:
    		- Path to a raster layer
    regressor: Regressor
    	Argument type:	string
    	Acceptable values:
    		- String value
    		- field:FIELD_NAME to use a data defined value taken from the FIELD_NAME field
    		- expression:SOME EXPRESSION to use a data defined value calculated using a custom QGIS expression
    n: Number of mixtures per class
    	Default value:	1000
    	Argument type:	number
    	Acceptable values:
    		- A numeric value
    		- field:FIELD_NAME to use a data defined value taken from the FIELD_NAME field
    		- expression:SOME EXPRESSION to use a data defined value calculated using a custom QGIS expression
    background: Proportion of background mixtures (%)
    	Default value:	0
    	Argument type:	number
    	Acceptable values:
    		- A numeric value
    		- field:FIELD_NAME to use a data defined value taken from the FIELD_NAME field
    		- expression:SOME EXPRESSION to use a data defined value calculated using a custom QGIS expression
    includeEndmember: Include original endmembers
    	Default value:	true
    	Argument type:	boolean
    	Acceptable values:
    		- 1 for true/yes
    		- 0 for false/no
    		- field:FIELD_NAME to use a data defined value taken from the FIELD_NAME field
    		- expression:SOME EXPRESSION to use a data defined value calculated using a custom QGIS expression
    mixingProbabilities: Mixing complexity probabilities (optional)
    	Default value:	0.5, 0.5
    	Argument type:	string
    	Acceptable values:
    		- String value
    		- field:FIELD_NAME to use a data defined value taken from the FIELD_NAME field
    		- expression:SOME EXPRESSION to use a data defined value calculated using a custom QGIS expression
    allowWithinClassMixtures: Allow within-class mixtures
    	Default value:	true
    	Argument type:	boolean
    	Acceptable values:
    		- 1 for true/yes
    		- 0 for false/no
    		- field:FIELD_NAME to use a data defined value taken from the FIELD_NAME field
    		- expression:SOME EXPRESSION to use a data defined value calculated using a custom QGIS expression
    classProbabilities: Class probabilities (optional)
    	Argument type:	string
    	Acceptable values:
    		- String value
    		- field:FIELD_NAME to use a data defined value taken from the FIELD_NAME field
    		- expression:SOME EXPRESSION to use a data defined value calculated using a custom QGIS expression
    ensembleSize: Ensemble size
    	Default value:	1
    	Argument type:	number
    	Acceptable values:
    		- A numeric value
    		- field:FIELD_NAME to use a data defined value taken from the FIELD_NAME field
    		- expression:SOME EXPRESSION to use a data defined value calculated using a custom QGIS expression
    robustFusion: Robust decision fusion (optional)
    	Default value:	false
    	Argument type:	boolean
    	Acceptable values:
    		- 1 for true/yes
    		- 0 for false/no
    		- field:FIELD_NAME to use a data defined value taken from the FIELD_NAME field
    		- expression:SOME EXPRESSION to use a data defined value calculated using a custom QGIS expression
    sumToOne: Sum-to-one constraint (optional)
    	Default value:	false
    	Argument type:	boolean
    	Acceptable values:
    		- 1 for true/yes
    		- 0 for false/no
    		- field:FIELD_NAME to use a data defined value taken from the FIELD_NAME field
    		- expression:SOME EXPRESSION to use a data defined value calculated using a custom QGIS expression
    outputFraction: Output class fraction layer
    	Argument type:	rasterDestination
    	Acceptable values:
    		- Path for new raster layer
    outputClassification: Output classification layer (optional)
    	Argument type:	rasterDestination
    	Acceptable values:
    		- Path for new raster layer
    outputFractionVariation: Output class fraction variation layer (optional)
    	Argument type:	rasterDestination
    	Acceptable values:
    		- Path for new raster layer
    
    ----------------
    Outputs
    ----------------
    
    outputFraction: <outputRaster>
    	Output class fraction layer
    outputClassification: <outputRaster>
    	Output classification layer
    outputFractionVariation: <outputRaster>
    	Output class fraction variation layer
    
    


..
  ## AUTOGENERATED COMMAND USAGE END
